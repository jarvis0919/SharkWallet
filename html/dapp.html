<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>layout 管理系统大布局 - Layui</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
    <script src="../js/assets.js" charset="utf-8"></script>
</head>

<body>
    <div class="layui-layout layui-layout-admin">
        <div class="layui-header layui-bg-gray">
            <div class="layui-col-xs12">
                <div class="layui-col-xs11" style="-webkit-app-region: drag;font-size: 25px;">&nbsp;</div>
                <div class="layui-col-xs1 layui-col-space10">
                    <i class="layui-icon  layui-icon-subtraction layui-col-xs6"
                        style="font-size: 30px; color: #ffffff;font-weight:400;text-align:center"
                        onClick="minimizeindex()"></i>
                    <i class="layui-icon  layui-icon-close layui-col-xs6"
                        style="font-size: 30px; color: #ffffff;font-weight:400;text-align:center"
                        onClick="tocloseindex()"></i>
                </div>
            </div>
            <div class="layui-logo">SHARK</div>
            <ul class="layui-nav layui-layout-left">
                <li class="layui-nav-item"><a href="assets.html">资产</a></li>
                <li class="layui-nav-item"><a href="transaction.html">交易</a></li>
                <li class="layui-nav-item layui-this"><a href="dapp.html">DAPP</a></li>
                <li class="layui-nav-item"><a href="setup.html">设置</a></li>

            </ul>
            <form class="layui-form" action="">
                <div class="layui-form-item">
                    <div class="layui-inline layui-assets">
                        <div class="layui-input-inline layui-net">
                            <select name="selectnet" id="selectnet" lay-filter="selectnet">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline layui-assets">
                        <div class="layui--inline layui-account">
                            <select name="selectaccount" id="selectaccount" lay-filter="selectaccount">
                            </select>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <!-- <div class="layui-nav-tree2"></div> -->
        <div class="layui-body2">
            <div style="font-size: 50px;">hello word</div>
        </div>
        <div class="layui-footer">
            <h3 id="address"></h3>
        </div>
    </div>


    <script src="./layui/layui.js"></script>
    <script>
        //JS 
        layui.use(['element', 'layer', 'util', 'form'], function () {
            var element = layui.element
                , layer = layui.layer
                , util = layui.util
                , form = layui.form
                , $ = layui.$;
            const userhome = require('userhome');
            const USE_HOME = userhome('AppData', 'Local', 'SharkWallet', 'Accountfile', 'json');
            const accountpath = userhome(USE_HOME, 'account.json');
            const netpath = userhome(USE_HOME, 'net.json');
            const tokenlistpath = userhome(USE_HOME, 'tokenlist.json');
            const transactionpath = userhome(USE_HOME, 'transaction.json');


            //readNet();
            //头部事件
            form.on('select(selectaccount)', function (data) {
                // console.log(data.elem); //得到select原始DOM对象
                $("#address").text("当前操作账户为 ：" + data.value);
                // var net = $('#selectnet').val();
                // getbalance(net, data.value);
                // // console.log($('#selectnet').val().trim());
                // // console.log(data.othis); //得到美化后的DOM对象
                // console.log(data.value); //得到被选中的值
                // console.log(data.elem[data.elem.selectedIndex].text); //得到文本内容
                // $("#Balanotice").text("余额刷新于：" + Date());
            });
            form.on('select(selectnet)', function (data) {
                // console.log(data.elem); //得到select原始DOM对象
                // var address = $('#selectaccount').val();
                // getbalance(data.value, address);
                // // console.log(data.othis); //得到美化后的DOM对象
                // console.log(data.value); //得到被选中的值
                // console.log(data.elem[data.elem.selectedIndex].text); //得到文本内容
                // $("#Balanotice").text("余额刷新于：" + Date());
            });

            $.ajax({
                url: accountpath,
                dataType: 'json',
                type: 'get',
                success: function (data) {
                    console.log(data);
                    //下面会提到这个data是什么值
                    //使用循环遍历，给下拉列表赋值
                    $.each(data.data, function (index, value) {
                        console.log(value);
                        $('#selectaccount').append(new Option(value.id, value.address));// 下拉菜单里添加元素
                    });
                    var batch = $('#selectaccount').val();
                    $("#address").text("当前操作账户为 ：" + batch);
                    console.log(batch);
                    // (new Option(value.id, value.address));
                    layui.form.render("select");//重新渲染 固定写法
                }
            })
            $.ajax({
                url: netpath,
                dataType: 'json',
                type: 'get',
                success: function (data) {
                    console.log(data);
                    //下面会提到这个data是什么值
                    //使用循环遍历，给下拉列表赋值
                    $.each(data.data, function (index, value) {
                        console.log(value);
                        $('#selectnet').append(new Option(value.id, value.net));// 下拉菜单里添加元素
                    });
                    var batch = $('#selectnet').val();
                    // $("#address").text("当前操作账户为 ：" + batch);
                    console.log(batch);
                    // (new Option(value.id, value.address));
                    layui.form.render("select");//重新渲染 固定写法
                }
            })

        });
    </script>
</body>

</html>